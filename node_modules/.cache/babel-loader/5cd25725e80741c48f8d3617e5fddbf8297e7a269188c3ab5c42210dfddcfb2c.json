{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yogeshwaran Kumaran\\\\OneDrive\\\\Desktop\\\\test\\\\online-test\\\\src\\\\components\\\\TestPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Chart from 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TestPage({\n  student,\n  questions,\n  setStage,\n  setResults\n}) {\n  _s();\n  const [timeLeft, setTimeLeft] = useState(30 * 60);\n  const [answers, setAnswers] = useState({});\n  const [cheatingLog, setCheatingLog] = useState([]);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  useEffect(() => {\n    // Enforce full-screen\n    document.documentElement.requestFullscreen();\n    setIsFullscreen(true);\n\n    // Timer\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 0) {\n          clearInterval(timer);\n          handleSubmit();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    // Cheating prevention\n    const logCheating = action => {\n      setCheatingLog(log => [...log, {\n        action,\n        timestamp: new Date().toISOString()\n      }]);\n    };\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        logCheating('tab_switch_attempt');\n        alert('Tab switching is not allowed!');\n      }\n    };\n    const handleFullscreenChange = () => {\n      if (!document.fullscreenElement) {\n        logCheating('exit_fullscreen_attempt');\n        alert('Please stay in full-screen mode!');\n        document.documentElement.requestFullscreen();\n      }\n    };\n    const handleContextMenu = e => {\n      e.preventDefault();\n      logCheating('right_click_attempt');\n    };\n    const handleCopyPaste = e => {\n      e.preventDefault();\n      logCheating(`${e.type}_attempt`);\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('contextmenu', handleContextMenu);\n    document.addEventListener('copy', handleCopyPaste);\n    document.addEventListener('paste', handleCopyPaste);\n    return () => {\n      clearInterval(timer);\n      document.exitFullscreen();\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener('contextmenu', handleContextMenu);\n      document.removeEventListener('copy', handleCopyPaste);\n      document.removeEventListener('paste', handleCopyPaste);\n    };\n  }, []);\n  const handleAnswer = (questionId, selected) => {\n    setAnswers({\n      ...answers,\n      [questionId]: selected\n    });\n  };\n  const handleSubmit = async () => {\n    const formattedAnswers = Object.keys(answers).map(qId => ({\n      questionId: parseInt(qId),\n      selected: answers[qId]\n    }));\n    const res = await fetch('http://localhost:5000/api/submit', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: student.id,\n        answers: formattedAnswers,\n        cheatingLog\n      })\n    });\n    setResults(await res.json());\n    setStage('results');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [student.domain, \" Test\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Time Left: \", Math.floor(timeLeft / 60), \":\", (timeLeft % 60).toString().padStart(2, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), questions.map((q, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [idx + 1, \". \", q.question]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: `q${q.id}`,\n          value: i,\n          onChange: () => handleAnswer(q.id, i)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this), opt]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this))]\n    }, q.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: handleSubmit,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n_s(TestPage, \"815pBe25htpQc0/vThK+5LRqdv0=\");\n_c = TestPage;\nexport default TestPage;\nvar _c;\n$RefreshReg$(_c, \"TestPage\");","map":{"version":3,"names":["useState","useEffect","Chart","jsxDEV","_jsxDEV","TestPage","student","questions","setStage","setResults","_s","timeLeft","setTimeLeft","answers","setAnswers","cheatingLog","setCheatingLog","isFullscreen","setIsFullscreen","document","documentElement","requestFullscreen","timer","setInterval","prev","clearInterval","handleSubmit","logCheating","action","log","timestamp","Date","toISOString","handleVisibilityChange","hidden","alert","handleFullscreenChange","fullscreenElement","handleContextMenu","e","preventDefault","handleCopyPaste","type","addEventListener","exitFullscreen","removeEventListener","handleAnswer","questionId","selected","formattedAnswers","Object","keys","map","qId","parseInt","res","fetch","method","headers","body","JSON","stringify","id","json","className","children","domain","fileName","_jsxFileName","lineNumber","columnNumber","Math","floor","toString","padStart","q","idx","question","options","opt","i","name","value","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Yogeshwaran Kumaran/OneDrive/Desktop/test/online-test/src/components/TestPage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Chart from 'chart.js/auto';\r\n\r\nfunction TestPage({ student, questions, setStage, setResults }) {\r\n  const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n  const [answers, setAnswers] = useState({});\r\n  const [cheatingLog, setCheatingLog] = useState([]);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Enforce full-screen\r\n    document.documentElement.requestFullscreen();\r\n    setIsFullscreen(true);\r\n\r\n    // Timer\r\n    const timer = setInterval(() => {\r\n      setTimeLeft((prev) => {\r\n        if (prev <= 0) {\r\n          clearInterval(timer);\r\n          handleSubmit();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    // Cheating prevention\r\n    const logCheating = (action) => {\r\n      setCheatingLog((log) => [\r\n        ...log,\r\n        { action, timestamp: new Date().toISOString() }\r\n      ]);\r\n    };\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (document.hidden) {\r\n        logCheating('tab_switch_attempt');\r\n        alert('Tab switching is not allowed!');\r\n      }\r\n    };\r\n\r\n    const handleFullscreenChange = () => {\r\n      if (!document.fullscreenElement) {\r\n        logCheating('exit_fullscreen_attempt');\r\n        alert('Please stay in full-screen mode!');\r\n        document.documentElement.requestFullscreen();\r\n      }\r\n    };\r\n\r\n    const handleContextMenu = (e) => {\r\n      e.preventDefault();\r\n      logCheating('right_click_attempt');\r\n    };\r\n\r\n    const handleCopyPaste = (e) => {\r\n      e.preventDefault();\r\n      logCheating(`${e.type}_attempt`);\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    document.addEventListener('contextmenu', handleContextMenu);\r\n    document.addEventListener('copy', handleCopyPaste);\r\n    document.addEventListener('paste', handleCopyPaste);\r\n\r\n    return () => {\r\n      clearInterval(timer);\r\n      document.exitFullscreen();\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n      document.removeEventListener('contextmenu', handleContextMenu);\r\n      document.removeEventListener('copy', handleCopyPaste);\r\n      document.removeEventListener('paste', handleCopyPaste);\r\n    };\r\n  }, []);\r\n\r\n  const handleAnswer = (questionId, selected) => {\r\n    setAnswers({ ...answers, [questionId]: selected });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const formattedAnswers = Object.keys(answers).map((qId) => ({\r\n      questionId: parseInt(qId),\r\n      selected: answers[qId]\r\n    }));\r\n\r\n    const res = await fetch('http://localhost:5000/api/submit', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        id: student.id,\r\n        answers: formattedAnswers,\r\n        cheatingLog\r\n      })\r\n    });\r\n\r\n    setResults(await res.json());\r\n    setStage('results');\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-5\">\r\n      <h2>{student.domain} Test</h2>\r\n      <p>Time Left: {Math.floor(timeLeft / 60)}:{(timeLeft % 60).toString().padStart(2, '0')}</p>\r\n      {questions.map((q, idx) => (\r\n        <div key={q.id} className=\"mb-4\">\r\n          <p>\r\n            {idx + 1}. {q.question}\r\n          </p>\r\n          {q.options.map((opt, i) => (\r\n            <div key={i}>\r\n              <input\r\n                type=\"radio\"\r\n                name={`q${q.id}`}\r\n                value={i}\r\n                onChange={() => handleAnswer(q.id, i)}\r\n              />\r\n              {opt}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n      <button className=\"btn btn-primary\" onClick={handleSubmit}>\r\n        Submit\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TestPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}